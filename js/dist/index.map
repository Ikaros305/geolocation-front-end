{"version":3,"sources":["disconnected.js","markers.js","userId.js","map.js","socket.js","checkformsubmited.js","socketConnectionCheck.js","formhandle.js","success.js","handledisconnect.js","geolocationUpdate.js","index.js"],"names":["module","exports","disconnectedMessage","message","div","document","getElementsByClassName","style","display","classList","remove","add","innerText","setTimeout","markersarray","initialLocation","userId","Math","floor","random","id","idtostring2","String","initMap","center","lat","lng","map","google","maps","Map","getElementById","zoom","db","collection","onSnapshot","changes","snapshot","docChanges","forEach","change","type","console","log","doc","data","marker","Marker","icon","content","name","disableAutoPan","InfoWindow","setPosition","set","push","docId","socket","io","connect","socketId","nameOfUser","spinners","serverDownAlert","getElementsByTagName","body","serverDownCheck","on","form","delete","then","setMap","ConnectionUp","socketid","length","idtostring","formdiv","addEventListener","e","value","height","accuracy","preventDefault","alertMessage","contains","handleDisconnect","where","disconnetId","get","docs","showPosition","position","update","coords","latitude","longitude","navigator","geolocation","setInterval","getCurrentPosition","alert","num"],"mappings":"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","file":"index.map","sourceRoot":"..","sourcesContent":["module.exports = {\r\n  disconnectedMessage: function (message) {\r\n    var div = document.getElementsByClassName('success-hide');\r\n    div[0].style.display = \"block\";\r\n    div[0].classList.remove('alert-primary');\r\n    div[0].classList.add('alert-danger');\r\n    div[0].innerText = message;\r\n    setTimeout(function(){ \r\n      div[0].style.display = \"none\";\r\n     }, 8000);\r\n  }\r\n}","module.exports = {\r\n  markersarray: [],\r\n  initialLocation: []\r\n}","userId = function () {\r\n    userId = Math.floor((Math.random() * 10000000000000000000) + 1);\r\n    return userId;\r\n}\r\n    module.exports = {\r\n      id: userId()\r\n    }","import {\r\n  markersarray\r\n} from './markers';\r\nimport {\r\n  id\r\n} from './userId';\r\nvar idtostring2 = String(id);\r\n\r\nmodule.exports = {\r\n  initMap: function () {\r\n    var center = {\r\n      lat: 51.507351,\r\n      lng: -0.127758\r\n    };\r\n\r\n    // Create a map object and specify the DOM element\r\n    // for display.\r\n    var map = new google.maps.Map(document.getElementById('map'), {\r\n      center: center,\r\n      zoom: 11\r\n    });\r\n    // getting data from database\r\n    db.collection('geolocation').onSnapshot(snapshot => {\r\n      let changes = snapshot.docChanges();\r\n      changes.forEach(change => {\r\n        if (change.type == 'added') {\r\n          console.log(change.doc.data().userId)\r\n          if (change.doc.data().userId == idtostring2) {\r\n            // Create a marker and set its position.\r\n            var marker = new google.maps.Marker({\r\n              icon: '../img/map-icon.png',\r\n              content: change.doc.data().name,\r\n              disableAutoPan: true,\r\n              map: map,\r\n            })\r\n          } else {\r\n            // Create a marker and set its position.\r\n            var marker = new google.maps.InfoWindow({\r\n              content: change.doc.data().name,\r\n              disableAutoPan: true,\r\n              map: map,\r\n            })\r\n          }\r\n\r\n          marker.setPosition({\r\n            lat: change.doc.data().lat,\r\n            lng: change.doc.data().lng\r\n          });\r\n          marker.set('id', change.doc.id);\r\n          marker.set('userId', idtostring2);\r\n          markersarray.push(marker);\r\n        } else if (change.type == 'modified') {\r\n          // get modified id of document\r\n          var docId = change.doc.id\r\n          markersarray.forEach(marker => {\r\n            if (marker.id == docId) {\r\n              // update location\r\n              marker.setPosition({\r\n                lat: change.doc.data().lat,\r\n                lng: change.doc.data().lng\r\n              });\r\n            }\r\n          })\r\n        }\r\n      });\r\n    })\r\n  }\r\n}","module.exports = {\r\n  socket: io.connect('https://geolocation-comunit.herokuapp.com/'),\r\n  socketId: []\r\n}\r\n","module.exports = {\r\n  nameOfUser: []\r\n}","import {\r\n  socket\r\n} from './socket';\r\nimport {\r\n  id\r\n} from './userId';\r\nimport socketId from './socket';\r\nimport { nameOfUser } from './checkformsubmited';\r\nimport { markersarray } from './markers';\r\n\r\nlet spinners = document.getElementsByClassName('main-bg');\r\nlet serverDownAlert = document.getElementsByClassName('serverdownalert');\r\ndocument.getElementsByTagName('form#form');\r\nlet body = document.getElementsByTagName('body');\r\nvar idtostring2 = String(id);\r\n\r\n\r\nmodule.exports = {\r\n  // check if server down\r\n  serverDownCheck: socket.on('connect_error', function () {\r\n    serverDownAlert[0].style.display = 'block';\r\n    body[0].classList.add('spinner-1');\r\n    form.style.display = 'none';\r\n    serverDownAlert[0].innerText = 'No internet connection can be found!';\r\n    db.collection(\"onlineusers\").doc(socketId.socketId[0]).delete().then(function () {})\r\n    db.collection(\"geolocation\").doc(idtostring2).delete().then(function () {})\r\n    markersarray.forEach(marker => {\r\n      if (marker.userId == idtostring2) {\r\n        marker.setMap(null);\r\n      }\r\n    });\r\n  }),\r\n\r\n  ConnectionUp: socket.on('connect', function () {\r\n    body[0].classList.remove('spinner-1');\r\n    form.style.display = 'block';\r\n    serverDownAlert[0].style.display = 'none';\r\n    socketId.socketId.push(socket.id);\r\n    db.collection(\"onlineusers\").doc(socket.id).set({\r\n      userId: idtostring2,\r\n      socketid: socket.id\r\n    }).then(function () {\r\n      if (nameOfUser.length == 1) {\r\n        db.collection(\"geolocation\").doc(idtostring2).set({\r\n          name: nameOfUser[\"0\"],\r\n          lat: 51.507351,\r\n          lng: -0.127758,\r\n          userId: idtostring2\r\n        })\r\n      }\r\n    })\r\n  })\r\n}","import { disconnectedMessage } from './disconnected';\r\nimport { initMap } from './map';\r\nimport { id } from './userId';\r\nimport markersarray from './markers';\r\nimport { socket } from './socket';\r\nimport { serverDownCheck, ConnectionUp } from './socketConnectionCheck';\r\nimport { nameOfUser } from './checkformsubmited';\r\n\r\nvar idtostring = String(id);\r\n\r\nlet form = document.getElementById('form');\r\nlet formdiv = document.getElementById('main-bg');\r\n\r\nform.addEventListener('submit', (e) => {\r\n  let name = document.getElementById('name').value;\r\n  nameOfUser.push(name);\r\n  // remove main main-bg\r\n  formdiv.style.display = \"none\";\r\n  // set map height\r\n  document.getElementById('map').style.height = '100%';\r\n  // save user in database with initizlized lat and lng\r\n  db.collection(\"geolocation\").doc(idtostring).set({\r\n    name: name,\r\n    lat: 51.507351,\r\n    lng: -0.127758,\r\n    accuracy: 0,\r\n    userId: idtostring\r\n  })\r\n  // initilize map\r\n  initMap()\r\n  e.preventDefault();\r\n});","import {\r\n  nameOfUser\r\n} from './checkformsubmited';\r\n\r\nmodule.exports = {\r\n  alertMessage: function (message) {\r\n    // if statement to avoid alert message showing on first screen\r\n    if (nameOfUser.length === 0) {\r\n      //if form not submitted this will take care of it and won't show any alert\r\n    } else {\r\n      var div = document.getElementsByClassName('success-hide');\r\n      if (div[0].classList.contains('alert-danger')) {\r\n        div[0].classList.remove('alert-danger');\r\n        div[0].classList.add('alert-primary');\r\n      }\r\n      div[0].style.display = \"block\";\r\n      div[0].innerText = message;\r\n      setTimeout(function () {\r\n        div[0].style.display = \"none\";\r\n      }, 8000);\r\n    }\r\n  }\r\n}","import { markersarray } from './markers';\r\nimport { socket } from './socket';\r\nimport { disconnectedMessage } from './disconnected';\r\nmodule.exports = {\r\n  handleDisconnect:\r\n  socket.on('disconnectId', function (data) {\r\n    db.collection('onlineusers').where('socketid', '==', data.disconnetId).get().then((snapshot) => {\r\n      snapshot.docs.forEach(doc => {\r\n        markersarray.forEach(marker => {\r\n          if (marker.id == doc.data().userId) {\r\n            marker.setMap(null);\r\n            disconnectedMessage(marker.content + ' Disconnected');\r\n          }\r\n        });\r\n      });\r\n    });\r\n  })\r\n}","import { id } from './userId';\r\nvar idtostring = String(id);\r\nmodule.exports = {\r\n  showPosition:\r\n   //  update it main functionality\r\n  function showPosition(position) {\r\n    // find user by userId\r\n    db.collection('geolocation').where('userId', '==', idtostring).get().then((snapshot) => {\r\n      snapshot.docs.forEach(doc => {\r\n        const userId = doc.id;\r\n        // update location \r\n        db.collection('geolocation').doc(userId).update({\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude\r\n        });\r\n      });\r\n    });\r\n  }\r\n}","import formhandle from './formhandle';\r\nimport { alertMessage } from './success';\r\nimport { id } from './userId';\r\nimport socket from './socket';\r\nimport { handledisconnect } from './handledisconnect';\r\nimport { showPosition } from './geolocationUpdate';\r\n\r\n// get position of user every 2 seconds\r\nif (navigator.geolocation) {\r\n  setInterval(function(){\r\n    navigator.geolocation.getCurrentPosition(showPosition);\r\n  }, 2000);\r\n} else {\r\n  alert('Geolocation is not supported by this browser.');\r\n}\r\n\r\ndb.collection('geolocation').onSnapshot(snapshot => {\r\n  let num = snapshot.docs.length\r\n  let changes = snapshot.docChanges();\r\n if (changes.length > 1) {\r\n  changes.forEach(change => {\r\n    if (change.type == 'added') {\r\n      if (change.doc.data().userId == id == false) {\r\n        alertMessage(num + ' Joined In');\r\n      }\r\n    }\r\n  })\r\n } else {\r\n  changes.forEach(change => {\r\n    if (change.type == 'added') {\r\n      if (change.doc.data().userId == id == false) {\r\n        alertMessage(change.doc.data().name + ' Joined In');\r\n      }\r\n    }\r\n  })\r\n }\r\n})\r\n"]}